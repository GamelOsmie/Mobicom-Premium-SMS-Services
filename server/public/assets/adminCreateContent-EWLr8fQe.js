import{u as g,j as e,L as f,N,m as y,c as v,a as C,C as r}from"./index-ecJo6cfF.js";import{a as L}from"./useContents-nuU95uoe.js";function w(){var i,o,m,u,d;const{register:s,handleSubmit:l,watch:x,formState:{errors:a},reset:h}=C(),t=x("body"),{mutate:j,isLoading:c}=L({onSuccess:n=>{const{status:b}=n;b==="success"&&h()}}),p=n=>{j(n)};return e.jsxs("div",{className:"mx-auto md:w-4/6 lg:w-1/3",children:[e.jsx("h3",{className:"font-semibold text-2xl text-center mb-8 ",children:"Create Content"}),e.jsxs("form",{onSubmit:l(p),children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"subject",className:"input-label",children:"Subject"}),e.jsx("input",{type:"text",id:"subject",className:"input w-full",placeholder:"subject",...s("subject",{required:!0,minLength:2})}),e.jsxs(e.Fragment,{children:[((i=a.subject)==null?void 0:i.type)==="required"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(r,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," You forgot to add a subject!"]}),((o=a.subject)==null?void 0:o.type)==="minLength"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(r,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," Your subject is too short"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"body",className:"input-label",children:"Message"}),e.jsx("textarea",{rows:4,type:"text",id:"body",className:"input w-full",placeholder:"message",...s("body",{minLength:2,maxLength:120})}),e.jsx("div",{className:"flex justify-end",children:(t==null?void 0:t.length)<=120&&e.jsxs("p",{className:"text-gray-400 text-sm font-light",children:[120-(t==null?void 0:t.length)," characters remaining"]})}),e.jsxs(e.Fragment,{children:[((m=a.body)==null?void 0:m.type)==="minLength"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(r,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," Your message is too short"]}),((u=a.body)==null?void 0:u.type)==="maxLength"&&e.jsxs("p",{className:"form-error-text flex items-start gap-1",children:[e.jsx(r,{className:"text-lg"}),"Your message shouldn't be longer than 120 characters"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"category",className:"input-label",children:"Category"}),e.jsxs("select",{id:"category",className:"input w-full",...s("category",{required:!0}),children:[e.jsx("option",{value:"2021",children:"2021"}),e.jsx("option",{value:"2022",children:"2022"}),e.jsx("option",{value:"2023",children:"2023"}),e.jsx("option",{value:"2024",children:"2024"})]}),e.jsx(e.Fragment,{children:((d=a.category)==null?void 0:d.type)==="required"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(r,{className:"text-lg"})," You need to select a category"]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"publication_status",className:"input-label",children:"Publication status"}),e.jsxs("select",{id:"publication_status",className:"input w-full",value:"draft",...s("publication_status",{required:!0}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{disabled:c,type:"submit",className:"btn-primary w-full",children:c?"Creating content...":"Create content"})})]})]})}function q(){const{user:s}=g(l=>l.user);return e.jsx("div",{className:"bg-black",children:e.jsx(f,{headerArea:e.jsx(N,{menuLinks:s.user_role.includes("Admin")?y:v}),mainArea:e.jsx(w,{})})})}export{q as default};
