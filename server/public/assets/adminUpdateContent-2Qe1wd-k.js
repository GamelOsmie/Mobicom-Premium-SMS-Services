import{u as L,j as e,L as v,N as C,m as w,c as F,e as S,f as U,a as _,C as n}from"./index-ecJo6cfF.js";import{d as k,e as A}from"./useContents-nuU95uoe.js";function P(){var u,d,m,x,h,j,p;const{slug:a}=S(),r=U(),{register:i,handleSubmit:b,watch:f,formState:{errors:l}}=_(),t=f("body"),{data:s}=k(a),{mutate:g,isLoading:o}=A({slug:a,options:{onSuccess:c=>{const{status:y}=c;y=="success"&&r(-1)}}}),N=c=>{g(c)};return e.jsx(e.Fragment,{children:(s==null?void 0:s.data)&&e.jsxs("div",{className:"mx-auto md:w-4/6 lg:w-1/3",children:[e.jsx("h3",{className:"font-semibold text-2xl text-center mb-8 ",children:"Update Content"}),e.jsxs("form",{onSubmit:b(N),children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"subject",className:"input-label",children:"Subject"}),e.jsx("input",{type:"text",id:"subject",className:"input w-full",placeholder:"subject",defaultValue:(u=s==null?void 0:s.data)==null?void 0:u.subject,...i("subject",{required:!0,minLength:2})}),e.jsxs(e.Fragment,{children:[((d=l.subject)==null?void 0:d.type)==="required"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(n,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," You forgot to add a subject!"]}),((m=l.subject)==null?void 0:m.type)==="minLength"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(n,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," Your subject is too short"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"body",className:"input-label",children:"Message"}),e.jsx("textarea",{rows:4,type:"text",id:"body",className:"input w-full",placeholder:"message",defaultValue:(x=s==null?void 0:s.data)==null?void 0:x.body,...i("body",{minLength:2,maxLength:120})}),e.jsx("div",{className:"flex justify-end",children:(t==null?void 0:t.length)<=120&&e.jsxs("p",{className:"text-gray-400 text-sm font-light",children:[120-(t==null?void 0:t.length)," characters remaining"]})}),e.jsxs(e.Fragment,{children:[((h=l.body)==null?void 0:h.type)==="minLength"&&e.jsxs("p",{className:"form-error-text flex items-center gap-1",children:[e.jsx(n,{className:"text-lg"})," ",e.jsx("span",{className:"font-medium",children:"Oops!"})," Your message is too short"]}),((j=l.body)==null?void 0:j.type)==="maxLength"&&e.jsxs("p",{className:"form-error-text flex items-start gap-1",children:[e.jsx(n,{className:"text-lg"}),"Your message shouldn't be longer than 120 characters"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"publication_status",className:"input-label",children:"Publication status"}),e.jsxs("select",{id:"publication_status",className:"input w-full",defaultValue:(p=s==null?void 0:s.data)==null?void 0:p.publication_status,...i("publication_status",{required:!0}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{disabled:o,type:"submit",className:"btn-primary w-full",children:o?"Updating content...":"Update content"})})]})]})})}function M(){const{user:a}=L(r=>r.user);return e.jsx("div",{className:"bg-black",children:e.jsx(v,{headerArea:e.jsx(C,{menuLinks:a.user_role.includes("Admin")?w:F}),mainArea:e.jsx(P,{})})})}export{M as default};
